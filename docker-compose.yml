version: "3.8" # Версия синтаксиса Docker Compose

services:
  db: # Назва нашого сервиса бази даних
    image: postgres:16-alpine # Використовуємо офіційний образ PostgreSQL версії 16 (alpine - легковесний)
    restart: always # Завжди перезапускати контейнер, якщо він упав
    environment: # Змінні середовища для PostgreSQL
      POSTGRES_DB: micro_chirp_db # Ім'я бази даних, яку ми хочемо створити
      POSTGRES_USER: dima # Ім'я користувача для підключення до БД
      POSTGRES_PASSWORD: 2025 # Пароль користувача для підключення до БД
    ports:
      - "5432:5432" # перебрасуємо порт 5432 контейнера на порт 5432 нашої хост-машини
    volumes:
      - db_data:/var/lib/postgresql/data # Зберігаємо дані БД в іменований том, щоб вони не втрачалися при перезапуску/видаленні контейнера

volumes:
  db_data: # Оголошуємо іменований том
